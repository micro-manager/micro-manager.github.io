---
autogenerated: true
title: PgFocus
layout: page
---

# Complete description can be found at [BIG](http://big.umassmed.edu/wiki/index.php/PgFocus)

## Discussion

All discussions and questions should be sent to [micromanager
forum](https://forum.image.sc/tag/micro-manager)

Tag me @kbellve and/or add pgFocus to the subject and I should see it.

## Purchasing

If you are unable to build pgFocus yourself, you are welcome to contact
Karl Bellve for a pgFocus. He will build it, test it, and ship it to
you. Currently, he is asking for a donation to offset the cost of the
electronics and a loss of a vacation day that he uses to build it. The
donation also supports advancing pgFocus.

## Description

pgFocus is an open source and open hardware, for noncommercial use,
focus stabilization device developed by Karl BellvÃ© at the [Biomedical
Imaging Group](http://big.umassmed.edu) ([Progam in Molecular
Medicine](http://www.umassmed.edu/pmm/index.aspx), [University of
Massachusetts Medical School](http://www.umassmed.edu/)).

The pg in pgFocus is short for "Pretty Good". pgFocus isn't "Perfect",
or "Definite" but it is pretty good!

pgFocus monitors focus changes through the positional changes of a
reflected laser beam. A significant feature of pgFocus is it acts as a
"man-in-the-middle." It is designed to pass through faster high fidelity
signals meant for a piezo Z controller while adding a slower focus
control signal. This happens in the analog realm, which avoids sampling
artifacts introduced by digitizing the original signal. This design also
reduces the cost of pgFocus.

### Installation

pgFocus supports automatic device detection with firmware 0.8

Serial Settings

-   57600 BAUD
-   Handshaking off
-   Parity None
-   Stop Bits 1

### Linux udev Rule

As root, create a file named /etc/udev/rules.d/99-pgFocus.rules with the
following content:

> \# pgFocus by the Biomedical Imaging Group SUBSYSTEMS=="usb",
> ATTRS{product}=="Arduino Leonardo", ATTRS{idVendor}=="2341",
> ATTRS{idProduct}=="8036",
> MODE="0660",GROUP="users",SYMLINK+="ttyACM%n"

## pgFocus Plugin

### Real Time Panel

The pgFocus plugin graphs incoming data from the pgFocus hardware.

<figure>
<img src="media/PgFocus_Realtime.png" title="media/PgFocus_Realtime.png" width="500" alt="media/PgFocus_Realtime.png" /><figcaption aria-hidden="true">PgFocus_Realtime.png</figcaption>
</figure>

Top graph shows the current focus offset.

Second from top graph is the Standard Deviation of the offset over time,
in nM.

The second from the bottom graph shows the voltage output, in nM, of the
on-board Digital to Analog Converter.

The bottom graph shows the voltage input, in nM, as measured by the on
board Analog to Digital Converter.

The update frequency can be changed in the settings panel.

### Light Profile Panel

The light profile graph can be used to center the reflected laser beam
onto pgFocus' sensor.

<figure>
<img src="media/PgFovus_Lightprofile.png" title="media/PgFovus_Lightprofile.png" width="500" alt="media/PgFovus_Lightprofile.png" /><figcaption aria-hidden="true">PgFovus_Lightprofile.png</figcaption>
</figure>

The refresh rate can be adjusted in the settings panel.

### Calibration Panel

<figure>
<img src="media/PgFocus_Calibration.png" title="media/PgFocus_Calibration.png" width="500" alt="media/PgFocus_Calibration.png" /><figcaption aria-hidden="true">PgFocus_Calibration.png</figcaption>
</figure>

Calibration should be performed after setting up pgFocus, and after any
changes. It lets pgFocus know how far to move the objective to maintain
focus.

### Settings Panel

<figure>
<img src="media/PgFocus_Settings.png" title="media/PgFocus_Settings.png" width="500" alt="media/PgFocus_Settings.png" /><figcaption aria-hidden="true">PgFocus_Settings.png</figcaption>
</figure>

Most of the important parameters can be changed on this panel.
Additional parameters can be modified or viewed in the Device/Property
Browser window for pgFocus.

### Device/Property Browser

<figure>
<img src="media/PgFocus_DeviceAdapter.png" title="media/PgFocus_DeviceAdapter.png" width="500" alt="media/PgFocus_DeviceAdapter.png" />
</figure>
