---
autogenerated: true
title: FakeCamera
layout: page
---

<table>
<tr>
<td markdown="1">

**Summary:**

</td>
<td markdown="1">

Adapter for fake/virtual camera that loads images from disk. Can provide
different images depending on stage postions.

</td>
</tr>
<tr>
<td markdown="1">

**Author:**

</td>
<td markdown="1">

Lukas Lang

</td>
</tr>
<tr>
<td markdown="1">

**License:**

</td>
<td markdown="1">

Apache License, Version 2.0

</td>
</tr>
<tr>
<td markdown="1">

**Platforms:**

</td>
<td markdown="1">

Windows, 32 & 64-bit, Linux (see [below](#Building_on_Linux "wikilink"))

</td>
</tr>
<tr>
<td markdown="1">

**Available since version:**

</td>
<td markdown="1">

1.4.23, 1. November 2017

</td>
</table>

This camera adapter adds a virtual camera that can be configured to load
arbitrary images from disk. Supported formats are all those supported by
OpenCV's
[`imread`](https://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#imread),
in particular:

-   PNG
-   BMP
-   TIF/TIFF
-   JPG/JPEG
-   ...

The pixel type can be set to 8/16-bit grayscale and 8/16-bit RGB (16-bit
RGB does currently not work due to a limitation in Micromanager). All
images are converted to the selected type, regardless of their true
pixel format.

The path mask can be set in the Device Property browser and supports the
following placeholders:

<table>
<tr>
<td markdown="1">

```
??
```

</td>
<td markdown="1">

Position of focus stage

</td>
<tr>
<td markdown="1">

```
?{<prec>}?
```

</td>
<td markdown="1">

Position of focus stage, with precision <prec>

</td>
<tr>
<td markdown="1">

```
?[<stage>]
```

</td>
<td markdown="1">

Position of stage <stage>

</td>
<tr>
<td markdown="1">

```
?{<prec>}[<stage>]
```

</td>
<td markdown="1">

Position of stage <stage> with precision <prec>

</td>
</table>

The positions are rounded according to the specified precision (default
is 0, i.e. integers). The resolved path (i.e. the path with the current
positions inserted) is shown in the "Resolved path" property. Demo
stages provided by the [DemoCamera](DemoCamera "wikilink") device
adapter can be used in place of physical stages to fully work without
hardware (to add multiple stages, add multiple DHub devices)

### Example path mask

The examples assume the following stage positions:

-   Focus stage: 7.41um
-   "x-Axis" stage: 3.52um
-   "y-Axis" stage: -1.33um

<table>
<tr>
<td markdown="1">

**Path mask**

</td>
<td markdown="1">

**Resolved path**

</td>
</tr>
<tr>
<td markdown="1">

```
C:\imgs\img_??.png
```

</td>
<td markdown="1">

```
C:\imgs\Img_7.png
```

</td>
</tr>
<tr>
<td markdown="1">

```
C:\imgs\img_??_?[x-Axis]_?[y-Axis].png
```

</td>
<td markdown="1">

```
C:\imgs\Img_7_3_-1.png
```

</td>
</tr>
<tr>
<td markdown="1">

```
C:\imgs\img_?{1}?_?{2}[x-Axis]_?[y-Axis].png
```

</td>
<td markdown="1">

```
C:\imgs\img_7.4_3.media/52_-1.png
```

</td>
</tr>
</table>

### Building on Linux

The device adapter can be used on Linux (RGB mode currently does not
work). To build it, the instructions in
[Linux\_installation\_from\_source\_(Ubuntu)](Linux_installation_from_source_(Ubuntu) "wikilink")
need to be adapted as follows (tested on Ubuntu 16):

-   During "Install Build programs & libraries", also install OpenCV
    2.4.8.3, following the guide
    [here](https://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html).
    In short:
    -   Dependencies {% highlight shell %}
        sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev   libavformat-dev libswscale-dev tar
        {% endhighlight %}
    -   Download code & extract it
        {% highlight shell %}
        wget https://github.com/opencv/opencv/archive/2.4.8.3.media/Tar.gz
        tar -xvf 2.4.8.3.media/Tar.gz
        {% endhighlight %}
    -   Build & install it
        {% highlight shell %}
        cd opencv-2.4.8.3
        mkdir release
        cd release
        cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
        make
        sudo make install
        {% endhighlight %}
-   During "Create the Autotools files" add `--with-opencv` to the
    configure call:
    {% highlight shell %}
    cd ~/mm/micro-manager1.4
    ./autogen.sh
    ./configure --enable-imagej-plugin=/usr/local/ImageJ --with-opencv
    {% endhighlight %}
-   Continue normally

{% include Listserv_Search text="FakeCamera" %}

