TODO list for 2.0. These are considered release blockers, unlike the items in the [[Version_2.0_Wishlist]].

==== Data API ====

* Ensure that 1.4 blatantly and quickly fails to load 2.0 data files
** Add a metadata version that we check for so we can cleanly fail when loading future versions
* Add axis order information to SummaryMetadata (and populate when acquiring data, and use when creating new DisplayWindows; see related TODO under viewers)
* Have scopeData and userData; former is everything set by us (first-party code), latter is everything else.
* Have a list of device names/labels that we store in the file.
* All device property states are stored "flat" in the file (to maintain compatibility with 1.4); reconstruct on load using the aforementioned list.
* Note: we are explicitly ignoring camera-provided metadata for the moment (will require modifications to the Core to tag these metadatas)

==== Profiles ====

* Having to register again is wrong, probably. In general all settings that were in Preferences are "lost".
** This depends on if the first official 2.0 release is from UCSF vs. Open Imaging.
* Main window size is a little wrong on Windows. (fixed?)
* Auto-select previous profile at startup prompt? Entire profile system is maybe unclear.

==== Daytime/Nighttime ====

* Low-contrast text can be hard to read in nighttime mode.
* MDA dialog has bright white components in nighttime mode.
** It appears that OS-rendered components can't be readily overridden via the look-and-feel; see [http://stackoverflow.com/questions/29904627/plaf-cant-change-button-color this StackOverflow discussion]. So we may be stuck for these components, unfortunately, unless we're willing to write our own custom components that don't look like OS-appropriate widgets.

==== Documentation ====

* org.micromanager.MultistagePosition (missing parameter descriptions)
* org.micromanager.data.DataManager (missing variable and return descriptions, superfluous imports)
* org.micromanager.data.Metadata (missing variable and return descriptions, formatting of Javadoc)
* org.micromanager.data.Storage (unused import, missing return and variable descriptions)
* org.micromanager.data.SummaryMetadata (missing javadoc to builder)

* org.micromanager.display.DisplaySettings (missing return and variable description, unused import)

==== Viewer window ====

* ImageJ tools and the right-click Duplicate command don't work (cannot repro this one)

* When duplicating displays, displayed axis order changes
* Image window resizing on zoom can send it off the bottom of the taskbar.
* Image dimensions etc. move from main window to image window?
* In fullscreen mode would be nice if we could shove the image over to make room for the inspector.
* Animating 3-channel timeseries has a lot of jumping back-and-forth, and overall animation rate is not faithful. Possibly due to large images being harder to draw.
* Multicam config file, 10ms exposure, start program, click "Live" in main frame (with no pre-existing image window) -> tons of error spam and also sometimes we get an EDT hang.
** Error message: "Error: this application, or a library it uses, has passed an invalid numeric value (NaN, or not-a-number) to CoreGraphics API. This is a serious error and contributes to an overall degradation of system stability and reliability. This notice is a courtesy: please fix this problem. It will become a fatal error in an upcoming update."

==== Miscellaneous ====

* Update useful existing scripts to new API
* Replace MMException/MMScriptException with more descriptive (and non-custom) exceptions
* Scan through entire codebase for TODO tags and fix them if appropriate
* When in nighttime mode, MDA channel settings are hard to read ("disabled text" color is easier to read than "enabled text" color)
* Recently-used config files dropdown in intro dialog is missing entries.
* Autofocus API needs some attention (remove use of PropertyItem and MMException?)

==== Testing ====
* Be sure to test non-square images from time to time
* Leave a Live display open for a few hours and see if the display "breaks".
* Check for memory leaks
* Try running acquisitions on 32-bit systems (in particular be aware of memory constraints e.g. with direct byte buffers)
* Test on Windows
* Test on older Macs and on displays with varying pixel densities
* Test high-speed acquisitions

==== Plugins ====
* Still have to select overlay plugins (e.g. Acquisition Tools -> Pattern Overlay) from the Plugins menu before they become available in the overlays tab; this ought to happen automatically on program start.

==== Files ====
* Ensure loading of 1.4 files works properly, with fallbacks for properties that aren't available but should be in 2.0 (e.g. display settings)

==== Inspector ====
* When last image window closes, inspector still shows information (e.g. in histograms)
* Autostretching and linking interact poorly -- autostretch should apply to the currently-displayed image.
** So make autostretch be a per-channel property, and modify ChannelControlPanel to only use the linked min/max when autostretch is not set. Requires adding an autostretch toggle button to each channel.
* Toggling eye button while in Color mode (also live two-channel) -> switch to Composite, eye button state is inconsistent.
* Should disable eye button unless in Composite mode.
* Histogram full/auto once buttons are squished together on Windows
* Initial scaling isn't autostretched for new MDA (even when autostretch is checked)
* Left/right buttons for horizontal histogram scale are reduced to "..." on Windows
** Same with animate buttons on image window
* MetadataPanel doesn't show anything when first opened (or when different images in MDA are selected -- did a 3-channel snapshot MDA).
* Histogram autoscaling only seems to apply to *next* image, not current image (OnPixelsSet vs. OnNewImage?).
* Size of scalebar is wrong (e.g. tiny 100um scalebar should be much bigger or number should be different)
* Option for centered text for scalebar (or different alignments in general)
* Overlays aren't redrawn when overlay is removed.
* Option to change size of timestamp (incl. font size)
* Create album, animate time axis, create duplicate album, turn on autostretching of duplicate, link duplicate histogram to original (animated) display -> EDT hang
