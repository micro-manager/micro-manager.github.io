The latest Scientific CMOS (sCMOS) cameras such as the [http://www.andor.com/scientific-cameras/neo-and-zyla-scmos-cameras/zyla-55-scmos Andor Zyla], [http://www.hamamatsucameras.com/flash4/ Hamamatsu Orca Flash 4.0], and [http://www.pco.de/categories/scmos-cameras/pcoedge/ PCO edge] boast large format sensors and high frame rates, producing image data of up to 1.1 GB/s. As of version 1.4.15, [http://micro-manager.org Micro-Manager] is capable of acquiring images from cameras at these high speeds. Some care must be taken to ensure that these images are properly stored.

First needed is a computer that can handle these data rates. With the right hardware, you can store the images either in RAM (for later copying to disk) or on solid state drives (SSDs).

To use the RAM storage strategy, make sure the computer has relatively recent RAM (such as PC1600 or faster) and enough RAM for the desired acquisition. The Micro-Manager team has tested a computer with 128 GB of RAM, storing 100 GB of images from the Andor Zyla and Hamamatsu Orca Flash 4.0 at full frame and full frame rate (90 seconds of images).

For SSD storage, we have used a number of SSDs in tandem using a RAID controller. Our setups included 3 or 4 Samsung 840 Series 256 GB SSDs. We used the RAID controller configuration software to create a [http://en.wikipedia.org/wiki/Standard_RAID_levels#RAID_0 RAID0] virtual drive, setting the [http://en.wikipedia.org/wiki/Data_striping stripe size] to 1MB and the write policy to Always Write Back. Then we used the [http://technet.microsoft.com/en-us/magazine/gg309170.aspx Windows 7 disk management tool] to format the virtual drive and set the Allocation Unit Size to 64 kB. It was convenient to use [http://crystalmark.info/software/CrystalDiskMark/index-e.html CrystalDiskMark] to measure the writing speed of the virtual drive, which was, as expected for a RAID0 setup, the sum of the SSDs' speed.

With Micro-Manager, we found we were able to acquire a long time series at 1.1 GB/s (the full frame rate and full 2560x2160 frame for the 10-tap Andor Zyla), filling the virtual drive with over 900 GB of frames in ~13 min.

Our test computer, we discovered after purchase, did not support [http://en.wikipedia.org/wiki/TRIM TRIM]. As a result, the performance of our virtual drive would fall dramatically after several acquisitions. We could restore performance to the highest level by reformatting the virtual drive the Windows disk management tool (with "Quick Format" turned off). Nonetheless, we strongly recommend purchasing a computer and RAID controller that are compatible with TRIM.

One the computer is set up, the camera driver is installed, Micro-Manager is installed (on a drive other than the virtual drive) and configured with the camera, we are ready to start testing acquisition. After starting Micro-Manager, select "Options" under the Tools menu. Please ensure that the "Fast Storage" option is checked. In the future, Fast Storage mode is likely to become the default and the checkbox will be hidden.

Starting live mode lets us test that the camera is working. For the sCMOS cameras such as the Zyla or Flash 4.0, setting exposure time to 10 ms should result in 100 fps reported in the Live window.

Once the camera is confirmed to be working, open Multi-Dimensional Acquisition, and select Time points. Multiple positions, Z-stacks, Autofocus, and Channels should be unchecked. For RAM storage, leave "Save images" unchecked. For disk storage, check "Save images" and make sure "Image stack file" is selected. Choose a directory and name prefix for the file. Then press the "Acquire!" button. A window should appear that shows a live view from the camera, and the progress of the acquisition. Micro-Manager's display will drop frames when necessary to avoid falling behind the acquisition (which does not drop frames).

At this point, the CPU usage should not be too high -- our test computer often shows only about 20% CPU consumption during a high speed acquisition. If images are being stored to RAM, you can open the Windows Task Manager and watch RAM usage ramp up linearly.

Once acquisition has finished, you can immediately review the movie by dragging the time slider on the display. If the images have been acquired to RAM, one can press the save button to save the images to disk (which, depending on the disk type, may take much longer than the acquisition itself). When the image window is closed, Micro-Manager's memory usage should fall back to the level before acquisition was started.

Micro-Manager's high speed hardware triggering capabilities can be combined with high speed cameras to produce sophisticated image sets. A microcontroller compatible with Micro-Manager, can pass trigger signals from the camera to an AOTF- or LED-based illuminator to produce high speed multi-channel movies, and by triggering a piezo-driven focus drive, can produce high speed Z stacks.



{{Documentation_Sidebar}}
