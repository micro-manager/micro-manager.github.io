{|
|'''Summary:'''
|Adapter for PTP/MTP cameras
|-
|'''Author:'''
|Koen De Vleeschauwer, [http://www.kdvelectronics.eu kdvelectronics]
|-
|'''License:'''
|LGPL
|-
|'''Platforms:'''
|MacOSX, linux
|-
|'''Devices:'''
|PTP and MTP cameras connected via USB.
|}

== Description ==

The GPhoto device driver provides support for cameras through [http://www.gphoto.org gphoto2]. These are, in general, cameras which connect through USB and use Picture Transfer Protocol (PTP) or Media Transfer Protocol (MTP).
See [http://gphoto.org/proj/libgphoto2/support.php] for a list of cameras.

== Installation ==

Installation instructions:
* Connect the camera to the computer with a USB cable. 
* Set the camera to PTP or MTP mode. On Nikon DSLRs, this is done by pressing the "Menu" button, and selecting Setup > USB > MTP/PTP. Do not set the camera to "USB mass storage".
* On Mac OS X, kill the PTP daemon. In a Terminal window, type:
  ps -ef | grep PTPCamera 
  kill pid
where pid is the process id of the PTPCamera process.
* You will need to kill the PTP daemon every time you switch the camera on, or connect the camera to the mac.
* With the camera switched on, start up Micro-Manager.
* Open the Tools menu, and choose Hardware Configuration Wizard.
* In the "Select the configuration file" window: Click on Next.
* In the "Add or remove devices" window: Click on Add.
* In the "Add device" window: Select GPhoto. Click on Add. A small window pops up with "Please type in the new device name". Click on OK. Click on Done.
* Back in the "Add or remove devices" window: Click on Next.
* In the "Edit pre-initialisation settings" window: Click on Next.
* In the "Setup Serial ports" window: Click on Next.
* In the "Select default devices" window: Choose "GPhoto" as default camera. Click on Next.
* In the "Set delays for devices without synchronisation capabilities" window: Click on Next.
* In the "Select devices to synchronize with image acquisition" window: Click on Next.
* In the "Define position labels for state devices" window: Click on Next.
* In the "Save configuration" window: Click "Save and test the new configuration". Click on Exit.
* Open the Tools menu, and choose Device/Property Browser.
* Verify your camera appears under "CameraName". On systems with more than one camera, you have to manually select the correct camera.

You can now use the camera in Micro-Manager.

== Properties==
[[Image:SimpleCamera-Settings.png]]

The following properties are currently implemented:

;Binning
:Binning groups pixels in both x and y direction. Allowable values are 1, 2, 4, 8.
;BitDepth
:Specifies the bit depth or dynamic range of the pixel. Actual bit depth may be less, depending upon the camera image sensor. Allowable values are "8" and "16". When set to "16", raw images will be decoded with linear gamma.
;CameraName
:On systems with more than one camera, specifies which camera is used.
;Exposure
:Exposure sets the exposure time. Units are ms.
;KeepOriginals
:Saves the pictures to disk. Allowable values are 0 and 1. Pictures are stored in the /tmp directory. The pictures are in the format provided by the camera; typically jpeg or raw.
;PixelType
:When set to Grayscale, converts images to grayscale. Allowable values are Color and Grayscale.
;ShutterSpeed
:Allows selecting the shutter speed. If "Shutter speed not set" is selected, micro-manager will not set camera shutter speed. This allows manually setting shutter speed on the camera itself. 
;ShutterSpeedTracksExposure
:When set, shutter speed will change every time the exposure time is changed. The shutter speed will change to the setting closest to the exposure time, if possible.
;TransposeCorrection
:When set, enables TransposeMirrorX, TransposeMirrorY, TransposeXY. Allowable values are 0 and 1. Transposing is useful if the camera image is not oriented as you would expect.
;TransposeMirrorX
:When set, mirrors image horizontally. Allowable values are 0 and 1.
;TransposeMirrorY
:When set, mirrors image vertically. Allowable values are 0 and 1.
;TransposeXY
:When set, rotates image. Allowable values are 0 and 1.

== Notes ==
*On Mac OS X, you have to kill the Apple PTP daemon every time after connecting your camera, or after switching your camera on, and before running micro-manager. 

*Many algorithms in Micro-Manager require grayscale images. Feeding a color image to a grayscale-only algorithm typically produces errors such as "Unsupported pixel type" or "Invalid data type". Setting both "PixelType" to "Grayscale" and "KeepOriginals" to "1" will send a grayscale image to Micro-Manager but allow you to read the original color images from disk.
